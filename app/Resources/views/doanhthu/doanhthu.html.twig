{% extends 'admin/admin.html.twig' %}
{% block script %}
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
{% endblock %}
{% block menu %}
    {% include 'admin/menu.html.twig' %}
{% endblock %}


{% block body %}
    <!-- /.row -->
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-header">
              <h1 class="box-title">Thốn kê doanh thu năm {{nam}} </h1>
    
              <div class="box-tools">
                <form method="POST" action="{{path('doanhthu_nam')}}">
                    <div class="input-group input-group-sm" style="width: 200px;">
                        <input type="number" id="_year" name="_year" class="form-control pull-right" placeholder="Search" >
                        <div class="input-group-btn">
                            <button type="submit" id="btn_doanhthu" class="btn btn-default "><i class="fa fa-search"></i></button>
                        </div>
                    </div>
                </form>
                
              </div>
            </div>
            <!-- /.box-header -->
    <div class="box-body table-responsive no-padding " >

        <canvas id="myChart" width="100%" height="100%"></canvas>

      
  
    </div>
    </div>
{% endblock %}
{% block javascripts %}
<script type="text/javascript" >
var date= new Date();
var year= date.getFullYear();
$("#_year").attr("value",year);
 var obj = {{ doanhthu|json_encode|raw }};
 var myObject = eval('(' + obj + ')');
 var labels = new Array();
 var data= new Array();

 for (var i = 0; i < myObject.length; i++) {
   labels[i]= 'Tháng '+myObject[i]['thang'];
   data[i]= myObject[i]['tongtien'];
 }

var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: 'Doanh Thu',
            data: data,
            backgroundColor: [

                'rgba(54, 162, 235, 0.2)',
            ],
            borderColor: [
                'rgba(255,99,132,1)',
            ],
            borderWidth: 3
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
{% endblock %}
